CREATE DATABASE PROJETO02;
SHOW DATABASES;
USE PROJETO02;

DROP TABLE RELATORIO;
DROP TABLE CATRACA;
DROP TABLE ALUNOS;

SHOW TABLES;

CREATE TABLE ALUNOS (
    MATRICULA INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100) NOT NULL,
    CPF VARCHAR (15) NOT NULL UNIQUE,
    EMAIL VARCHAR(100) NOT NULL UNIQUE,
    ALTURA INT NOT NULL,
    PESO INT NOT NULL
);

SELECT * FROM ALUNOS;
TRUNCATE ALUNOS;

CREATE TABLE CATRACA (
    ID_CATRACA INT AUTO_INCREMENT PRIMARY KEY,
    ID_ALUNO INT NOT NULL,
    HORARIO_INICIO DATETIME NOT NULL,
    HORARIO_SAIDA DATETIME NULL,
    CONSTRAINT FK_ID_ALUNO FOREIGN KEY (ID_ALUNO) REFERENCES ALUNOS(MATRICULA)
);

INSERT INTO CATRACA (ID_ALUNO, HORARIO_INICIO, HORARIO_SAIDA)
VALUES
    (1, '2024-11-03 08:00:00', '2024-11-03 10:00:00'),
    (1, '2024-11-06 09:00:00', '2024-11-06 11:30:00'),
    (2, '2024-11-08 15:00:00', '2024-11-08 16:00:00'),
    (2, '2024-11-10 14:00:00', '2024-11-10 16:30:00'),
    (3, '2024-11-10 18:00:00', '2024-11-10 20:00:00');


SELECT * FROM CATRACA;
TRUNCATE CATRACA;

CREATE TABLE RELATORIO (
    ID_RELATORIO INT AUTO_INCREMENT PRIMARY KEY,
    ID_ALUNO INT NOT NULL,
    HORAS_TOTAIS TIME NOT NULL DEFAULT '00:00:00',
    HORAS_SEMANAIS TIME NOT NULL DEFAULT '00:00:00',
    CLASSIFICACAO VARCHAR(50) NOT NULL DEFAULT 'Iniciante',
    CONSTRAINT FK_ALUNO_HORAS
        FOREIGN KEY (ID_ALUNO)
        REFERENCES ALUNOS (MATRICULA)
);
SELECT * FROM RELATORIO;
TRUNCATE RELATORIO;

INSERT INTO RELATORIO (ID_ALUNO, HORAS_TOTAIS, HORAS_SEMANAIS, CLASSIFICACAO)
VALUES
    (1, '10:00:00', '05:30:00', 'Intermediário'), -- João Silva
    (2, '07:30:00', '03:30:00', 'Iniciante'),     -- Maria Oliveira
    (3, '15:00:00', '02:00:00', 'Avançado');      -- Carlos Santos


